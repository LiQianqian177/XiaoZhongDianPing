# Windows 中文用户目录 Git 配置解决方案

## 问题描述
当 Windows 用户目录包含中文字符（如 `C:\Users\李\`）时，Git 和 SSH 可能会遇到路径编码问题。

## 已完成的配置

### 1. Git UTF-8 编码配置
以下配置已经完成，确保 Git 正确处理中文路径：

```bash
git config --global core.quotepath false          # 禁用路径引用，正确显示中文
git config --global i18n.commitencoding utf-8    # 提交信息使用 UTF-8
git config --global i18n.logoutputencoding utf-8 # 日志输出使用 UTF-8
```

### 2. 远程仓库协议
已将远程仓库从 SSH 改为 HTTPS，避免 SSH 路径问题：
- 原 SSH URL: `git@github.com:LiQianqian177/XiaoZhongDianPing.git`
- 现 HTTPS URL: `https://github.com/LiQianqian177/XiaoZhongDianPing.git`

## 解决方案选项

### 方案一：使用 HTTPS（推荐，已实施）
**优点：**
- 简单易用，不需要配置 SSH 密钥
- 不受中文路径影响
- 使用 Personal Access Token (PAT) 进行认证

**配置步骤：**
1. 已在 GitHub 上生成 Personal Access Token
2. 推送时使用 Token 作为密码

**查看当前配置：**
```bash
git remote -v
```

### 方案二：配置 SSH 以支持中文路径（可选）
如果将来需要使用 SSH，可以按以下步骤配置：

#### 1. 设置 SSH 配置目录到非中文路径
```bash
# 创建新的 SSH 配置目录（使用英文路径）
mkdir C:\Users\Public\.ssh
# 或者使用其他非中文路径

# 设置 SSH 配置
git config --global core.sshCommand "ssh -F C:/Users/Public/.ssh/config"
```

#### 2. 配置 SSH 使用 UTF-8
在 `C:\Users\Public\.ssh\config` 文件中添加：
```
Host github.com
    HostName github.com
    User git
    IdentityFile C:/Users/Public/.ssh/id_rsa
    IdentitiesOnly yes
    PreferredAuthentications publickey
```

#### 3. 生成 SSH 密钥（在非中文路径）
```bash
ssh-keygen -t rsa -b 4096 -C "your_email@example.com" -f C:/Users/Public/.ssh/id_rsa
```

#### 4. 将公钥添加到 GitHub
```bash
cat C:/Users/Public/.ssh/id_rsa.pub
# 复制输出内容，添加到 GitHub Settings > SSH and GPG keys
```

#### 5. 测试 SSH 连接
```bash
ssh -T git@github.com
```

#### 6. 切换回 SSH URL（如果需要）
```bash
git remote set-url origin git@github.com:LiQianqian177/XiaoZhongDianPing.git
```

## 验证配置

### 检查 Git 配置
```bash
git config --global --get core.quotepath
git config --global --get i18n.commitencoding
git config --global --get i18n.logoutputencoding
```

### 检查远程仓库配置
```bash
git remote -v
```

## 当前状态
✅ Git UTF-8 编码已配置
✅ 远程仓库已切换为 HTTPS
✅ 推送功能正常

## 注意事项

1. **HTTPS 认证**：使用 HTTPS 时，GitHub 不再接受密码，必须使用 Personal Access Token
2. **SSH 密钥路径**：如果使用 SSH，确保密钥文件路径不包含中文字符
3. **环境变量**：某些工具可能需要设置 `LANG` 或 `LC_ALL` 环境变量为 UTF-8

## 推荐做法
对于中文用户目录，建议：
- **优先使用 HTTPS**：简单、可靠，不受路径问题影响
- **如需使用 SSH**：将 SSH 配置和密钥放在非中文路径下

## 相关命令参考

```bash
# 查看所有 Git 配置
git config --global --list

# 查看远程仓库
git remote -v

# 切换远程协议
git remote set-url origin https://github.com/username/repo.git  # HTTPS
git remote set-url origin git@github.com:username/repo.git      # SSH

# 测试网络连接
ping github.com
```

